<!DOCTYPE html>

<html>
    <head>
        <title>PIU IO Guide | 5panel.dance</title>
        <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
        <link type="text/css" rel="stylesheet" href="/stylesheets/labels.css" />
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet" />
        <meta property="og:title" content="Pump it Up IO Guide" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://5panel.dance" />
        <meta property="og:image" content="https://dj505.github.io/assets/logo.jpg" />
        <meta property="og:description" content="Information regarding official and custom Pump it Up IO boards." />
        <meta name="theme-color" content="#61afef" />
        <meta name="viewport" content="width=device-width, initial-scale=0.5" />
        <script type="text/javascript" src="/script/incl-html.js"></script>
    </head>

    <body>
        <div class="back-to-top">
            Quick Index<br/><br/>
            <a href="#top">Back to Top</a><br/>
            <a href="#IoOverview">IO Boards & Overview</a><br/>
            <a href="#DIY">DIY Options & Modifications</a>
        </div>

        <div class="content" id="top">
            <a href="https://5panel.dance">
                <h1 align="center" class="topper-h1">5panel.dance</h1>
            </a>
            <h2 align="center">↙️↖️⏺️↗️↘️</h2>

            <p align="center"><a href="https://github.com/dj505">GitHub</a> • <a href="https://youtube.com/dj505itg">YouTube</a> • <a href="https://bsky.app/profile/5panel.dance">BlueSky</a> • <a href="https://discord.com/invite/ctMByBy">Discord</a> • <a href="https://ko-fi.com/dj505piu">Ko-Fi</a></p>

            <br/>

            <div class="info">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                    Info
                </h2>
                <dl>
                    <dt>This page is a work in progress!</dt>
                    <dd>Information here is subject to change. If you find inaccuracies or have suggestions, <a href="#Contact">contact me!</a></dd>
                </dl>
            </div>

            <br/>

            <div>
                <h2 class="body-header">Page Directory</h2>
                <!-- Ugly formatting is necessary here to preserve the whitespace because I don't wanna fill it with &nbsps -->
                <p class="codebox">
<a href="https://5panel.dance">5panel.dance/</a><br/>
└── guide/<br/>
    └── Pump it Up Simulator Guide<br/>
        ├── <a href="#IoOverview">IO Boards & Overview</a><br/>
        └── <a href="#DIY">DIY Options & Modifications</a>
                </p>
            </div>

            <br />

            <div id="IoOverview">
                <h2 class="body-header">What Is An IO Board?</h2>
                <span class="body-text">
                    <p>
                        An IO board, short for "Input/Output board," is a circuit board responsible for handling communication between a game and its various inputs and outputs.
                        Many arcade games are built with a proprietary IO device, to ensure that players can't just plug in a gamepad or keyboard to cheat the system.
                        This is especially important for games like <em>Pump it Up</em>, where people pulling up to the cab with a keyboard and playing with their hands would be very problematic for the leaderboards.
                    </p>
                    <p>
                        This page will <strong>only</strong> be covering IO boards that <strong>work with official PIU software</strong> in some capacity, without requiring modifications to the game's software or environment.
                    </p>
                </span>
            </div>

            <div id="IoOverview">
                <h3 class="body-header">Things That Are Not IO Boards</h3>
                <span class="body-text">
                    <p>
                        There are a few devices in the chain going from the dance pads to the main IO board that are often mistaken for IO boards, but are actually there to make the IO board's job easier.
                        These include the <strong>JAMMA PCB</strong> and <strong>stage PCBs</strong>.
                    </p>
                    <p>
                        The <strong>JAMMA PCB</strong> is a board attached to the side of the MK PC hardware.
                        It features seevral connectors of varying types, including Molex 5V/12V power, a large (typically blue) JAMMA slot which holds another PCB with several wires soldered on, multiple smaller connectors, and a few tactile buttons.
                        This board is responsible for relaying the signals sent from the "pad IO"/"foot PCBs" to the actual PIUIO, as well as supplying power to the PIUIO and cabinet lights.
                        The JAMMA PCB <strong>is not needed for a barebones, DIY setup</strong>, and is only required for everything to work properly in a full cabinet.
                    </p>
                    <p>
                        The <strong>stage PCBs</strong>, also commonly called "pad IO PCBs" or "foot PCBs", can be found in both pads, underneath the top middle piece of metal between the red arrows.
                        These are responsible for taking the dozens of wires required to connect every individual sensor and LED strip in the pad, and condensing them down to a more manageable handful of signals for the JAMMA board to pass to the PIUIO.
                        These boards <strong>are not needed for a barebones, DIY setup</strong>, and are only used for the game to be able to poll and address each individual sensor and light in the pads.
                    </p>
                    <p>
                        Earlier revisions of these boards feature a large socketed FPGA chip, while later revisions use smaller ICs. They are functionally identical, and will work even on the newest LX model pads.
                    </p>
                </span>
            </div>

            <div>
                <h2 class="body-header">Types of PIU I/O Boards</h2>
                <span class="body-text">
                    <p>
                        <em>Pump it Up</em> has used several different proprietary IO boards throughout its lifetime.
                        This guide will be focusing primarily on <strong>modern IO boards</strong>, as very few people are looking for information on older boards due to incompatibility with modern setups.
                        I also don't really know anything about IO boards older than the MK6IO. I'll update this page as I learn more.
                    </p>
                    <p>
                        The most commonly discussed boards, both official and unofficial, are as follows.
                        Click on any to jump to its section for more information.
                    </p>
                </span>
                <ul>
                    <li>
                        <a href="#LXIO"><span class="attn-label">LXIO</span></a> <span class="label-green">Official</span> // <em>MK10IO, ATXMega PIUIO, Nuvoton PIUIO</em>
                    </li>
                    <li>
                        <a href="#PIUIO"><span class="attn-label">PIUIO</span></a> <span class="label-green">Official</span> // <em>MK6IO, MK9IO</em>
                    </li>
                    <li>
                        <a href="#ButtonBoard"><span class="attn-label">Button Board IO</span></a> <span class="label-green">Official</span>
                    </li>
                    <li>
                        <a href="#BrokeIO"><span class="attn-label">BrokeIO</span></a> <span class="label-blue">Custom/DIY</span>
                    </li>
                    <li>
                        <a href="#piuio-pico"><span class="attn-label">piuio-pico</span></a> <span class="label-blue">Custom/DIY</span>
                    </li>
                    <li>
                        <a href="#piuio_clone"><span class="attn-label">piuio_clone</span></a> <span class="label-blue">Custom/DIY</span>
                    </li>
                    <li>
                        <a href="#PIUIO_Arduino"><span class="attn-label">PIUIO_Arduino</span></a> <span class="label-blue">Custom/DIY</span>
                    </li>
                </ul>
            </div>

            <div>
                <h2 class="body-header">Official IO Boards</h2>
                <span class="body-text">
                    <p>
                        The following section will cover <strong>official IO boards</strong> used in <em>Pump it Up</em> cabinets manufactured by Andamiro.
                    </p>
                </span>
            </div>

            <div id="LXIO">
                <h3 class="body-header">LXIO</h3>
                <span class="body-text">
                    <p>
                        <span class="label-blue">AKA:</span> MK10IO, ATXMega PIUIO, Nuvoton PIUIO <br />
                        <span class="label-blue">Compatibility:</span> PRIME 2 - Phoenix
                    </p>
                    <br />
                    <a href="/assets/guide/io/lxio.jpg"><img src="/assets/guide/io/lxio_thumb.jpg" align="left" width="200px" style="margin: 0px 20px 0px 0px; box-shadow: rgba(0, 0, 0, 0.19) 0px 10px 20px, rgba(0, 0, 0, 0.23) 0px 6px 6px;"/></a>
                    <p class="first">
                        The "LXIO" board was released around late 2016/early 2017 with the LX model cabinet, which was made available alongside <em>Pump it Up: PRIME 2</em>.
                        It is a completely new piece of hardware compared to the PIUIO, featuring built-in support for the front panel button board, as well as faster polling rates (up to ~1000Hz).
                        Unlike the PIUIO, the LXIO operates as a standard USB HID device, and doesn't suffer from the USB 1.0 control transfer shenanigans that the PIUIO does. This means that it is not backwards compatible with games that only support the PIUIO.
                        The only games that officially support it are <em>Pump it Up: PRIME 2</em> and onwards. Older games can only be played via LXIO through unofficial, third party means.
                    </p>
                    <p>
                        There are a few hardware revisions of the LXIO, too.
                        Boards produced from release until roughly mid-late 2024 were based on Atmel ATXMega microcontrollers, and were officially referred to as "ATXMega PIUIO" boards.
                        There were slightly different hardware revisions for boards included in LX cabinets, versus boards that were available as upgrade kits for older cabinets; I'll update this section to clarify once I have more information.
                        Later boards produced towards the end of 2024 and onward are based on a Nuvoton ARM microcontroller.
                        I'm not sure which specifically, but they're functionally identical to the ATXMega boards, just with a slightly different firmware. If I had to guess, this was probably done for cost reasons.
                    </p>
                    <p>
                        Andamiro has also released several firmware updates for the LXIO.
                        There isn't a lot of documentation on what changed, but the USB PID seems to be different for each.
                        The only thing I've seen this actually have an effect on is whether or not the board works for third-party IO hooks, used to make older titles LXIO-compatible; some drivers and hooks expect a specific PID/VID, and hadn't been tested on all firmwares.
                        It doesn't seem to make any perceptible difference to anyone who's just playing the game.
                    </p>
                </span>
            </div>

            <div id="PIUIO">
                <h3 class="body-header">PIUIO</h3>
                <span class="body-text">
                    <p>
                        <span class="label-blue">AKA:</span> MK6IO, MK9IO <br />
                        <span class="label-blue">Compatibility:</span> Exceed 2 - Phoenix
                    </p>
                    <br />
                    <figure align="left" style="float: left">
                        <a href="/assets/guide/io/piuio.jpg"><img src="/assets/guide/io/piuio_thumb.jpg" width="200px" style="margin: 0px 20px 0px 0px; box-shadow: rgba(0, 0, 0, 0.19) 0px 10px 20px, rgba(0, 0, 0, 0.23) 0px 6px 6px;"/></a>
                        <br />
                        <figcaption>Two hardware revisions of the PIUIO. | Photo credit: @spaghettisnail</figcaption>
                    </figure>
                    <p class="first">
                        The PIUIO is by far the most common and widely supported IO board.
                        It was released with the MK6 PC hardware used in <em>Pump it Up: Exceed 2</em> and has been supported by every game since.
                        It does not include built-in support button board hardware, and has a very limited polling speed, maxing out at around 250Hz but averaging considerably lower.
                        However, using third party drivers (eg. piuio2key or piuio2vjoy) to run the device in USB 2.0 mode <strong>for use with simulators</strong> can achieve upwards of 1000Hz polling rates.
                        This is not possible on official software.
                    </p>
                    <p>
                        The PIUIO is often looked down on as inferior hardware due to its slow polling, but it's powered by the Cypress EZ-USB FX2 microcontroller, which is quite capable.
                        The actual reason behind the polling rate issues stems from a decision Andamiro made when writing the PIUIO's firmware.
                        Data is moved back and forth between the game and the PIUIO using <strong>control transfer requests</strong>, which are designed to set up or tear down a device connection, not move polling data around.
                        However, with USB 1.0, control transfers have a <strong>guaranteed round trip time</strong>, meaning the same length of time will always pass between sending the data and receiving it back.
                        This guarantees a stable and consistent polling speed with no jitter, but with the tradeoff of it being <em>really slow.</em>
                    </p>
                    <p>
                        If Anadmiro made the decision to run the PIUIO at USB 2.0 speeds, it would be considerably faster, at 250us per round trip instead of 10ms.
                        However, they claim to have run into reliability issues at those speeds, so the device was forced down to USB 1.0 speeds by official games.
                    </p>
                    <p>
                        Luckily, community member dinsfire64 (aka din) fixed these issues with <a href="https://github.com/dinsfire64/fusion"><em>fusion</em></a>, an incredible tool that allows you to reflash an original PIUIO board with a custom firmware that allows fot faster polling rates!
                        There are some super cool options on display here, including a PIUIO firmware reimplementation that polls 4x faster than the original, an LXIO firmware that bumps polling to ~1KHz on Prime 2 and beyond, and even a HID gamepad firmware.
                        You can also go back to the original PIUIO firmware, if you so desire. 
                    </p>
                </span>
            </div>

            <div id="ButtonBoard">
                <h3 class="body-header">Button Board IO</h3>
                <span class="body-text">
                    <p>
                        <span class="label-blue">AKA:</span> "the buttonboard" <br />
                        <span class="label-blue">Compatibility:</span> Pro - Phoenix
                    </p>
                    <p>
                        The button board IO was released as part of an upgrade kit for <em>Pump it Up: PRO</em>, initially for FX and GX model cabinets, alongside an actual button board plate.
                        Once installed, players would be able to navigate menus using four buttons on the front of the cabinet instead of the dance pads. Supported inputs were left, right, select, and options.
                        The button board was <strong>required</strong> by <em>Pro</em> and <em>Pro 2</em>, which only allowed menu inputs through the front buttons, similar to <em>In the Groove</em>.
                        CX and TX cabinet models include built-in button boards, with no need for a separate upgrade kit. The hardware is identical internally, if I'm not mistaken.
                        The button board on LX model cabinets <strong>is not</strong> the same hardware; instead, the LXIO added support for front panel buttons with no additional IO board.
                    </p>
                    <p>
                        The button board IO has a different USB PID than the PIUIO, but it functions otherwise identically, running in USB 1.0 mode and using control transfer requests for polling data.
                        It cannot be used for hitting arrows, though. Only menu navigation.
                    </p>
                </span>
            </div>

            <hr />

            <div id="DIY">
                <h2 class="body-header">DIY Options</h2>
                <span class="body-text">
                    <p>
                        Due to the prohibitive cost of official hardware for anyone that isn't an arcade owner and operator with money to burn on upgrades, the community has created several low-cost DIY solutions for playing official PIU software at home!
                        These options range from free, to ~$5, to ~$100 depending on the hardware, overall quality, and the extent of DIY stuff you're willing to do.
                        The most commonly referenced projects can be found in this section.
                    </p>
                </span>
            </div>

            <div id="BrokeIO">
                <h3 class="body-header">BrokeIO</h3>
                <span class="body-text">
                    <p>
                        <span class="label-blue">Compatibility:</span> Yes
                    </p>
                    <p>
                        BrokeIO is a custom IO board developed by <a href="https://github.com/sugoku">Bedrock</a> as a drop-in replacement for the PIUIO, sharing a similar form factor and layout.
                        It's based on the Raspbbery Pi RP2040 microcontroller, and supports essentially all cabinet hardware (including lights!) without any extra setup.
                        By holding down the service button behind the coin door for 2 seconds, the IO board goes into a configuration mode, where it can be toggled between PIUIO, LXIO, keyboard, gamepad, XInput, and Nintendo Switch modes.
                    </p>
                    <p>
                        This is easily the best and most versatile IO replacement that currently exists, and given how easy it is to install, it's hard to beat.
                        It works with any game that supports the PIUIO, it can be used in LXIO mode for faster polling rates on <em>PRIME 2</em> and later, and you can use it natively on simulators via gamepad and keybnoard modes.
                        You can also play Mario Kart 8 Deluxe on your dance pads with it! Or any other Nintendo Switch game!
                    </p>
                    <p>
                        These boards are currently made to order If you share any mutual Discord servers with Bedrock, I recommend reaching out to him directly.
                        I will update this page with more information over time regarding availability!
                    </p>
                    <p>
                        The firmware is open source, and you can find it <a href="https://github.com/sugoku/piuio-pico-brokeio"><span class="attn-label">here</span></a>.
                    </p>
                </span>
            </div>

            <div id="piuio-pico">
                <h3 class="body-header">piuio-pico</h3>
                <span class="body-text">
                    <p>
                        <span class="label-blue">AKA:</span> the PicoFX firmware <br />
                        <span class="label-blue">Compatibility:</span> Exceed 2 - Phoenix
                    </p>
                    <p>
                        piuio-pico was developed for a hand controller I designed called the <a href="https://github.com/dj505/PicoFX">PicoFX</a>.
                        All you need to be able to use it is a $4 Raspberry Pi Pico microcontroller (specifically the RP2040-based Pico 1, not the RP2350-based Pico 2), and a willingness to learn some DIY electronics stuff if you don't already have the knowledge or experience.
                        The codebase currently only supports full-panel inputs with no multiplexing, meaning that the game will see all 4 sensors light up at the same time.
                        <strong>Be advised:</strong> this <em>may potentially</em> be detected as cheating if used on currently supported and online games!
                        It also supports lights for each panel, and WS2812B-compatible ARGB LEDs for cabinet lights.
                        There is an <strong>experimental branch for button board functionality</strong>, which has been tested and works with official games, but may be changed in the future.
                    </p>
                    <p>
                        Just because this code was written for a specific use case doesn't mean you can't wire it up to your own hardware, though!
                        piuio-pico has been used for everything from custom hand controllers to full dance pads.
                        For 12V LEDs, you will need to bring your own hardware in the form of some MOSFETs, and be willing to modify the code for cabinet lights if you want to use anything more than a strip of 6 WS2812B-compatible LEDs.
                        But for a basic setup, if all you need is buttons, it can do that no problem! You can even buy a Pico with headers or screw terminals preattached if you can't/don't want to solder.
                    </p>
                    <p>
                        For power users and/or those who are willing to order a custom PCB, my <a href="https://github.com/dj505/PicoIO">PicoIO</a> board breaks out all of the inputs to JST XH connectors.
                        The connectors for each button have pins for 5V-12V LEDs via built-in MOSFETs; you just need to provide an external power supply appropriate for the LEDs.
                        WS2812B data and power pins are also exposed, alongside some extra IO that aren't used by the firmware, in case you want to play around with addons.
                    </p>
                    <p>
                        piuio-pico's codebase is open source, and you can find it <a href="https://github.com/48productions/piuio-pico"><span class="attn-label">here</span></a>.
                    </p>
                </span>
            </div>

            <div id="piuio_clone">
                <h3 class="body-header">piuio_clone</h3>
                <span class="body-text">
                    <p>
                        <span class="label-blue">Compatibility:</span> Exceed 2 - Phoenix
                    </p>
                    <p>
                        piuio_clone is a PIUIO emulation firmware for the ATMega328 (or, more commonly, the Arduino Uno) developed by <a href="https://github.com/racerxdl">racerxdl</a>.
                        This was the only real option back when I first threw together a PIUIO clone for Fiesta 2 back in 2016 or so when I was just getting into PIU at home!
                        There are some easy to follow schematics available in the <a href="https://github.com/racerxdl/piuio_clone/tree/simple">"simple" branch</a> to get you up and running, though keep in mind the "simple" branch <strong>does not support lights</strong>.
                        All you need is an Arduino Uno (or compatible clone), a USB cable you can cut apart, and a way to wire up your desired buttons.
                    </p>
                    <p>
                        The main branch of the software supports all cabinet buttons and lights, but is <strong>configured for OpenITG and StepMania</strong>.
                        I personally haven't used this branch, and I can't speak for how difficulty it is to set it up and get everything wired.
                        <strong>For anyone that just wants to make a pad work,</strong> it's recommended that you use the "simple" branch.
                    </p>
                    <p>
                        Power users, or those willing to learn how to make an AVR work without a whole development board, can build a very simple and straightforward circuit with a bare ATMega328, clock, and necessary passive components to make a barebones dedicated PIUIO clone on nothing but a breadboard or piece of perfboard.
                        I wouldn't recommend this for first time use unless you know what you're doing, but it's what I eventually swapped over to, and it served me well for many years!
                    </p>
                    <p>
                        The main drawback for this project is that it uses bitbanged USB on a microcontroller that's already not very fast, so polling rates are going to be rather slow even if you use a custom driver like piuio2key.
                        I would recommend using <a href="piuio-pico">piuio-pico</a> unless you just so happen to have a spare Arduino Uno or some ATMega328s laying around.
                    </p>
                    <p>
                        You can find the main repository for piuio_clone <a href="https://github.com/racerxdl/piuio_clone"><span class="attn-label">here</span></a>.
                    </p>
                </span>
            </div>

            <div id="PIUIO_Arduino">
                <h3 class="body-header">PIUIO_Arduino</h3>
                <span class="body-text">
                    <p>
                        <span class="label-blue">Compatibility:</span> Exceed 2 - Phoenix
                    </p>
                    <p>
                        PIUIO_Arduino is another PIUIO clone firmware for the Arduino, but instead of supporting any ATMega328 chip with a USB cable soldered on, it uses the built-in USB port.
                        This is possible because instead of the PIUIO code running on the ATMega328 itself, the firmware is instead flashed to the ATMega8u2/16u2, which is normally used as a "bridge" to program the ATMega328 over USB, which it doesn't natively support on its own.
                        It also supports lighting, through the use of shift regisers.
                    </p>
                    <p>
                        There are a couple downsides to this particular project that only really make it a feasible choice for anyone who might already have the right hardware laying around.
                        You <strong>MUST</strong> have an Arduino that <strong>has an ATMega16u2 or 32u4</strong>.
                        Most Arduino clones forgo this in favour of a cheaper non-programmable serial chip, and the Arduino Uno R4 uses a completely different MCU.
                        The most common piece of compatible hardware that most people are likely to have on hand would be an <strong>official Uno R3</strong>.
                    </p>
                    <p>
                        Because the hardware required is so specific, alongside the extra steps required to put the ATMega8u2/16u2 in DFU mode for reprogramming, I would recommend going with <a href="#piuio-pico">piuio-pico</a> if you don't already have the right hardware on hand.
                    </p>
                    <p>
                        You can find the main repository for piuio_clone <a href="https://github.com/ckdur/PIUIO_Arduino"><span class="attn-label">here</span></a>.
                    </p>
                    <p>
                        You can find a fork by <strong>48productions</strong>, with some extra documentation and a wiring diagram (in the "ArduinoPIUAux_Lights" directory) <a href="https://github.com/48productions/PIUIO_Arduino"><span class="attn-label">here</span></a>.
                    </p>
                </span>
            </div>
        </div>

        <footer>
            <div id="footer" incl-html="/include/footer.html"></div>
        </footer>

        <script>
            includeHTML();
        </script>
    </body>

</html>
